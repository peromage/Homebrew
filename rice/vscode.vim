""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"
" Rice setup entry for VSCode
"
" Created by peromage 2021/03/14
" Last modified 2021/03/18
"
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"-------------------------------------------------------------------------------
" Check if VSCode is enabled
"-------------------------------------------------------------------------------
if !rice#check_var('rice_vscode_use_config') | finish | endif

"-------------------------------------------------------------------------------
" Key bindings with the leader key
"-------------------------------------------------------------------------------
let g:mapleader="\<Space>"

"-------------------------------------------------------------------------------
" Nomal: Splitting
"-------------------------------------------------------------------------------
nmap <silent> <leader>v <C-W>v
nmap <silent> <leader>V <C-W>s

"-------------------------------------------------------------------------------
" Normal: Pane jump
"-------------------------------------------------------------------------------
nmap <silent> <leader>h <C-W>h
nmap <silent> <leader>j <C-W>j
nmap <silent> <leader>k <C-W>k
nmap <silent> <leader>l <C-W>l
nmap <silent> <leader>o <C-W>p

"-------------------------------------------------------------------------------
" Normal: Pane size adjustment
"-------------------------------------------------------------------------------
nmap <silent> <Down> <C-W>-
nmap <silent> <Up> <C-W>+
nmap <silent> <Left> <C-W><
nmap <silent> <Right> <C-W>>
nmap <silent> <leader>O <C-W>o

"-------------------------------------------------------------------------------
" Normal: Tabs
"-------------------------------------------------------------------------------
nmap <silent> <leader>N :tabprevious<CR>
nmap <silent> <leader>n :tabnext<CR>
nmap <silent> <leader>t :tabnew<CR>

"-------------------------------------------------------------------------------
" Normal: Search and substitution
"-------------------------------------------------------------------------------
nmap <leader>is :%s//gc<Left><Left><Left>
nmap <expr> <leader>iS ':%s/' . @/ . '//gc<Left><Left><Left>'
nmap <silent> # :noh<CR>
nmap <silent> * *N

"-------------------------------------------------------------------------------
" Normal: Misc
"-------------------------------------------------------------------------------
nmap <silent> <leader>q :q<CR>
nmap <silent> <leader>Q :qa<CR>
nmap <silent> <leader>w :w<CR>
nmap <silent> <leader>W :wa<CR>

"-------------------------------------------------------------------------------
" Visual: Search
"-------------------------------------------------------------------------------
vmap <silent> * y/\V<C-R>=escape(@",'/\')<CR><CR>N

"-------------------------------------------------------------------------------
" Simulate some common VSCode key bindings in normal mode
"-------------------------------------------------------------------------------
nmap <silent> <C-S> :w<CR>
